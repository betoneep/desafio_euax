{"remainingRequest":"X:\\Projetos Git\\Desafio EUAX\\web\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!X:\\Projetos Git\\Desafio EUAX\\web\\src\\views\\pages\\Login.vue?vue&type=script&lang=js&","dependencies":[{"path":"X:\\Projetos Git\\Desafio EUAX\\web\\src\\views\\pages\\Login.vue","mtime":1629152925734},{"path":"X:\\Projetos Git\\Desafio EUAX\\web\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"X:\\Projetos Git\\Desafio EUAX\\web\\node_modules\\babel-loader\\lib\\index.js","mtime":499162500000},{"path":"X:\\Projetos Git\\Desafio EUAX\\web\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"X:\\Projetos Git\\Desafio EUAX\\web\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KDQppbXBvcnQgUm90YXRlU3F1YXJlIGZyb20gIi4uLy4uL2NvbXBvbmVudHMvUm90YXRlU3F1YXJlIjsNCg0KZXhwb3J0IGRlZmF1bHQgew0KICBuYW1lOiAiTG9naW4iLA0KICBjb21wb25lbnRzOiB7IFJvdGF0ZVNxdWFyZSB9LA0KICBkYXRhKCkgew0KICAgIHJldHVybiB7DQogICAgICBsb2FkaW5nOiBmYWxzZSwNCiAgICAgIGVtYWlsOiAiIiwNCiAgICAgIHNlbmhhOiAiIiwNCiAgICAgIG1lbnNhZ2VtOiAiIg0KICAgIH07DQogIH0sDQogIGNvbXB1dGVkOiB7DQogICAgVmlld01vZGVsKCkgew0KICAgICAgcmV0dXJuIHsNCiAgICAgICAgRW1haWw6IHRoaXMuZW1haWwsDQogICAgICAgIFNlbmhhOiB0aGlzLnNlbmhhDQogICAgICB9Ow0KICAgIH0NCiAgfSwNCiAgbW91bnRlZCgpIHsNCiAgICBpZiAodGhpcy4kc3RvcmUuZ2V0dGVycy5pc0xvZ2dlZEluKSB7DQogICAgICB0aGlzLiRyb3V0ZXIucHVzaCgiLyIpOw0KICAgIH0NCiAgfSwNCiAgbWV0aG9kczogew0KICAgIG9uRm9ybVZhbGlkYXRlKGV2dCkgew0KICAgICAgZXZ0LnByZXZlbnREZWZhdWx0KCk7DQoNCiAgICAgIHRoaXMuTG9naW4oKTsNCiAgICB9LA0KICAgIEZlY2hhcigpIHsNCiAgICAgIHRoaXMubWVuc2FnZW0gPSAiIjsNCiAgICB9LA0KICAgIExvZ2luKCkgew0KICAgICAgdGhpcy5sb2FkaW5nID0gdHJ1ZTsNCiAgICAgIHRoaXMuJGh0dHAoew0KICAgICAgICB1cmw6ICJsb2dpbi9hdXRlbnRpY2FyIiwNCiAgICAgICAgZGF0YTogdGhpcy5WaWV3TW9kZWwsDQogICAgICAgIG1ldGhvZDogIlBPU1QiDQogICAgICB9KQ0KICAgICAgICAudGhlbigocmVzcCkgPT4gew0KICAgICAgICAgIHRoaXMubG9hZGluZyA9IGZhbHNlOw0KICAgICAgICAgIC8vIEFkZCB0aGUgZm9sbG93aW5nIGxpbmU6DQogICAgICAgICAgdGhpcy4kaHR0cC5kZWZhdWx0cy5oZWFkZXJzLmNvbW1vblsiQXV0aG9yaXphdGlvbiJdID0NCiAgICAgICAgICAgICJiZWFyZXIgIiArIHJlc3AuZGF0YS50b2tlbjsNCiAgICAgICAgICB0aGlzLiRzdG9yZQ0KICAgICAgICAgICAgLmRpc3BhdGNoKCJsb2dpbiIsIHJlc3AuZGF0YSkNCiAgICAgICAgICAgIC50aGVuKCgpID0+IHRoaXMuJHJvdXRlci5wdXNoKCIvIikpOw0KICAgICAgICB9KQ0KICAgICAgICAuY2F0Y2goKGVycm8pID0+IHsNCiAgICAgICAgICB0aGlzLmxvYWRpbmcgPSBmYWxzZTsNCiAgICAgICAgICBjb25zb2xlLmVycm9yKCJFcnJvIExvZ2luOiIsIGVycm8pOw0KICAgICAgICAgIHRoaXMuJG5vdGlmeSh7DQogICAgICAgICAgICBkYXRhOiBlcnJvLnJlc3BvbnNlLmRhdGEuZXJyb3MsDQogICAgICAgICAgICB0eXBlOiAid2FybiIsDQogICAgICAgICAgICBkdXJhdGlvbjogNTAwMA0KICAgICAgICAgIH0pOw0KICAgICAgICAgIGxvY2FsU3RvcmFnZS5yZW1vdmVJdGVtKCJ1c2VyLXRva2VuIik7DQogICAgICAgIH0pOw0KICAgIH0NCiAgfQ0KfTsNCg=="},{"version":3,"sources":["Login.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAyGA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"Login.vue","sourceRoot":"src/views/pages","sourcesContent":["<template>\r\n  <div class=\"container fade-in\">\r\n    <div class=\"min-vh-100 d-flex justify-content-center align-content-center\">\r\n      <div class=\"m-auto col-lg-8\">\r\n        <div class=\"card-group\">\r\n          <div class=\"card p-4\">\r\n            <div class=\"card-body\">\r\n              <div v-if=\"loading\" class=\"loading-container\">\r\n                <RotateSquare\r\n                  class=\"loading-position animated fadeIn\"\r\n                  size=\"60px\"\r\n                ></RotateSquare>\r\n              </div>\r\n              <form v-else @submit=\"onFormValidate\">\r\n                <h1>Login</h1>\r\n                <p class=\"text-muted\">Efetue o login.</p>\r\n                <div class=\"d-flex flex-column\">\r\n                  <div class=\"input-group mb-3\">\r\n                    <div class=\"input-group-append\">\r\n                      <span class=\"input-group-text\">\r\n                        <CIcon name=\"cil-user\" />\r\n                      </span>\r\n                    </div>\r\n                    <input\r\n                      v-model=\"email\"\r\n                      type=\"text\"\r\n                      class=\"form-control\"\r\n                      placeholder=\"Usuário\"\r\n                      required\r\n                    />\r\n                  </div>\r\n\r\n                  <div class=\"input-group mb-3\">\r\n                    <div class=\"input-group-append\">\r\n                      <span class=\"input-group-text\">\r\n                        <CIcon name=\"cil-lock-locked\" />\r\n                      </span>\r\n                    </div>\r\n                    <input\r\n                      v-model=\"senha\"\r\n                      type=\"password\"\r\n                      class=\"form-control\"\r\n                      placeholder=\"Senha\"\r\n                      required\r\n                    />\r\n                  </div>\r\n                  <div\r\n                    v-if=\"mensagem\"\r\n                    class=\"alert alert-warning alert-dismissible fade show\"\r\n                    role=\"alert\"\r\n                  >\r\n                    <strong>{{ mensagem }}</strong>\r\n                    <button\r\n                      type=\"button\"\r\n                      class=\"close\"\r\n                      data-dismiss=\"alert\"\r\n                      aria-label=\"Close\"\r\n                      @click=\"Fechar()\"\r\n                    >\r\n                      <span aria-hidden=\"true\">&times;</span>\r\n                    </button>\r\n                  </div>\r\n                </div>\r\n\r\n                <div class=\"d-flex align-content-around mt-5\">\r\n                  <!-- <button class=\"btn px-4 btn-primary mr-auto\" type=\"submit\">Login</button> -->\r\n                  <button class=\"btn px-4 btn-primary mr-auto\" type=\"submit\">\r\n                    Login\r\n                  </button>\r\n\r\n                  <button\r\n                    class=\"btn px-0 btn-link\"\r\n                    @click=\"$router.push('/esqueci-senha')\"\r\n                  >\r\n                    Esqueceu a Senha?\r\n                  </button>\r\n                </div>\r\n              </form>\r\n            </div>\r\n          </div>\r\n          <div\r\n            class=\"card text-center py-5 d-md-down-none bg-primary text-white\"\r\n          >\r\n            <h2 class=\"m-2\">Ainda não tem uma conta?</h2>\r\n            <p class=\"m-5\">\r\n              Entre em contato com nossa equipe de vendas para maiores\r\n              informações.\r\n            </p>\r\n            <div>\r\n              <button\r\n                href=\"https://www.euax.com.br/\"\r\n                target=\"_blank\"\r\n                class=\"btn btn-primary active mt-3\"\r\n              >\r\n                Contratar agora!\r\n              </button>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport RotateSquare from \"../../components/RotateSquare\";\r\n\r\nexport default {\r\n  name: \"Login\",\r\n  components: { RotateSquare },\r\n  data() {\r\n    return {\r\n      loading: false,\r\n      email: \"\",\r\n      senha: \"\",\r\n      mensagem: \"\"\r\n    };\r\n  },\r\n  computed: {\r\n    ViewModel() {\r\n      return {\r\n        Email: this.email,\r\n        Senha: this.senha\r\n      };\r\n    }\r\n  },\r\n  mounted() {\r\n    if (this.$store.getters.isLoggedIn) {\r\n      this.$router.push(\"/\");\r\n    }\r\n  },\r\n  methods: {\r\n    onFormValidate(evt) {\r\n      evt.preventDefault();\r\n\r\n      this.Login();\r\n    },\r\n    Fechar() {\r\n      this.mensagem = \"\";\r\n    },\r\n    Login() {\r\n      this.loading = true;\r\n      this.$http({\r\n        url: \"login/autenticar\",\r\n        data: this.ViewModel,\r\n        method: \"POST\"\r\n      })\r\n        .then((resp) => {\r\n          this.loading = false;\r\n          // Add the following line:\r\n          this.$http.defaults.headers.common[\"Authorization\"] =\r\n            \"bearer \" + resp.data.token;\r\n          this.$store\r\n            .dispatch(\"login\", resp.data)\r\n            .then(() => this.$router.push(\"/\"));\r\n        })\r\n        .catch((erro) => {\r\n          this.loading = false;\r\n          console.error(\"Erro Login:\", erro);\r\n          this.$notify({\r\n            data: erro.response.data.erros,\r\n            type: \"warn\",\r\n            duration: 5000\r\n          });\r\n          localStorage.removeItem(\"user-token\");\r\n        });\r\n    }\r\n  }\r\n};\r\n</script>\r\n"]}]}